<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Subnet Visualizer</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1 { text-align: center; color: #2c3e50; }
        input { width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 4px; }
        button { background: #3498db; color: white; border: none; padding: 10px 15px; border-radius: 4px; cursor: pointer; display: block; margin: 20px auto; }
        button:hover { background: #2980b9; }
        .bit { width: 25px; height: 25px; display: inline-flex; align-items: center; justify-content: center; margin: 2px; border-radius: 3px; color: white; font-weight: bold; }
        .network-bit { background-color: #3498db; }
        .subnet-bit { background-color: #2ecc71; }
        .host-bit { background-color: #e74c3c; }
        .info-box { background: #ecf0f1; padding: 15px; border-radius: 4px; margin-bottom: 15px; }
        .results { display: none; margin-top: 20px; }
        .legend { display: flex; margin-top: 10px; font-size: 12px; }
        .legend div { margin-right: 15px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Subnet LEGO Visualizer</h1>
        
        <div class="info-box">
            <h3>Input Values</h3>
            <label>Host IP Address:</label>
            <input type="text" id="ip-address" value="192.168.1.100">
            
            <label>Subnet Mask:</label>
            <input type="text" id="subnet-mask" value="255.255.255.0">
        </div>
        
        <button id="calculate-btn">Visualize Subnet</button>
        
        <div id="results" class="results">
            <div class="info-box">
                <h3>Network Information</h3>
                <div id="network-info"></div>
            </div>
            
            <div class="info-box">
                <h3>Binary Visualization</h3>
                <div id="binary-visualization"></div>
            </div>
        </div>
    </div>

    <script>
        document.getElementById('calculate-btn').addEventListener('click', function() {
            calculateSubnet();
            document.getElementById('results').style.display = 'block';
        });

        function calculateSubnet() {
            // Get input values
            const ipAddress = document.getElementById('ip-address').value;
            const subnetMask = document.getElementById('subnet-mask').value;
            
            // Parse IP and subnet mask
            const ipOctets = ipAddress.split('.').map(Number);
            const maskOctets = subnetMask.split('.').map(Number);
            
            // Convert to binary
            const ipBinary = ipOctets.map(octet => octet.toString(2).padStart(8, '0'));
            const maskBinary = maskOctets.map(octet => octet.toString(2).padStart(8, '0'));
            
            // Calculate network address
            const networkOctets = ipOctets.map((octet, index) => octet & maskOctets[index]);
            
            // Calculate first and last host
            const firstHost = [...networkOctets];
            firstHost[3] += 1;
            
            const broadcastOctets = networkOctets.map((octet, index) => {
                if (maskOctets[index] === 255) return octet;
                return octet | (~maskOctets[index] & 255);
            });
            
            const lastHost = [...broadcastOctets];
            lastHost[3] -= 1;
            
            // Calculate CIDR notation
            const cidr = maskBinary.join('').split('1').length - 1;
            
            // Calculate usable hosts
            const hostBits = 32 - cidr;
            const usableHosts = Math.pow(2, hostBits) - 2;
            
            // Update network info
            let networkHTML = `
                <p><strong>IP Address:</strong> ${ipAddress}</p>
                <p><strong>Subnet Mask:</strong> ${subnetMask} (/${cidr})</p>
                <p><strong>Network Address:</strong> ${networkOctets.join('.')}</p>
                <p><strong>First Usable Host:</strong> ${firstHost.join('.')}</p>
                <p><strong>Last Usable Host:</strong> ${lastHost.join('.')}</p>
                <p><strong>Broadcast Address:</strong> ${broadcastOctets.join('.')}</p>
                <p><strong>Number of Usable Hosts:</strong> ${usableHosts.toLocaleString()}</p>
            `;
            document.getElementById('network-info').innerHTML = networkHTML;
            
            // Create binary visualization
            createBinaryVisualization(ipBinary, maskBinary);
        }
        
        function createBinaryVisualization(ipBinary, maskBinary) {
            const container = document.getElementById('binary-visualization');
            container.innerHTML = '';
            
            // IP Address visualization
            const ipDiv = document.createElement('div');
            ipDiv.innerHTML = '<strong>IP Address:</strong>';
            ipDiv.style.marginBottom = '10px';
            
            const ipBits = document.createElement('div');
            
            const flatMask = maskBinary.join('');
            const flatIp = ipBinary.join('');
            
            for (let i = 0; i < flatIp.length; i++) {
                const bit = document.createElement('div');
                bit.className = 'bit';
                bit.textContent = flatIp[i];
                
                // Color based on network/host bits
                if (flatMask[i] === '1') {
                    bit.classList.add('network-bit');
                } else {
                    bit.classList.add('host-bit');
                }
                
                // Add dot separator between octets
                if (i > 0 && i % 8 === 0) {
                    const dot = document.createElement('span');
                    dot.textContent = '.';
                    dot.style.margin = '0 5px';
                    ipBits.appendChild(dot);
                }
                
                ipBits.appendChild(bit);
            }
            
            ipDiv.appendChild(ipBits);
            container.appendChild(ipDiv);
            
            // Mask visualization
            const maskDiv = document.createElement('div');
            maskDiv.innerHTML = '<strong>Subnet Mask:</strong>';
            maskDiv.style.marginTop = '15px';
            maskDiv.style.marginBottom = '10px';
            
            const maskBits = document.createElement('div');
            
            for (let i = 0; i < flatMask.length; i++) {
                const bit = document.createElement('div');
                bit.className = 'bit';
                bit.textContent = flatMask[i];
                
                if (flatMask[i] === '1') {
                    bit.classList.add('network-bit');
                } else {
                    bit.classList.add('host-bit');
                }
                
                if (i > 0 && i % 8 === 0) {
                    const dot = document.createElement('span');
                    dot.textContent = '.';
                    dot.style.margin = '0 5px';
                    maskBits.appendChild(dot);
                }
                
                maskBits.appendChild(bit);
            }
            
            maskDiv.appendChild(maskBits);
            container.appendChild(maskDiv);
            
            // Add legend
            const legend = document.createElement('div');
            legend.className = 'legend';
            legend.innerHTML = `
                <div><span style="display:inline-block;width:12px;height:12px;background:#3498db;margin-right:5px;"></span>Network Bits</div>
                <div><span style="display:inline-block;width:12px;height:12px;background:#e74c3c;margin-right:5px;"></span>Host Bits</div>
            `;
            container.appendChild(legend);
        }
        
        // Calculate on page load
        window.onload = function() {
            calculateSubnet();
            document.getElementById('results').style.display = 'block';
        };
    </script>
</body>
</html>
